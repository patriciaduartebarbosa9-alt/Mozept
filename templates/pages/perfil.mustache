{{< layout}}
{{$main}}
<script>
    const headerConfig = {
        navPrefix: '',
        userType: '',
        userId: null
    };
</script>
<main class="profile-page">
  <!-- PERFIL -->
  <section class="profile-card">
    <img src="https://i.pravatar.cc/80?img=32" class="avatar" alt="Avatar">
    <div class="profile-info">
      <h2>Rodrigo Silva</h2>
      <p>Fot√≥grafo Profissional Especializado em Casamentos e Eventos</p>
      <div class="meta">
        <span>‚≠ê 4.9 (127 avalia√ß√µes)</span>
        <span>Mirandela, Portugal</span>
      </div>
    </div>
    <button class="edit-btn" onclick="window.location.href='edit-profile.html'">Editar Perfil</button>
  </section>
  <!-- TABS -->
  <section class="tabs">
    <button class="tab-btn active" data-tab="portfolio">Portf√≥lio</button>
    <button class="tab-btn" data-tab="servicos">Servi√ßos</button>
    <button class="tab-btn" data-tab="avaliacoes">Avalia√ß√µes</button>
  </section>
  <!-- CONTE√öDO DAS TABS -->
  <section class="tab-content">
    <!-- PORTF√ìLIO -->
    <div id="portfolio" class="tab-panel active">
      <button class="edit-btn" data-edit="portfolio">Editar Portf√≥lio</button>
      <div class="portfolio">
        <img src="https://picsum.photos/400/400?1">
        <img src="https://picsum.photos/400/400?2">
        <img src="https://picsum.photos/400/400?3">
        <img src="https://picsum.photos/400/400?4">
        <img src="https://picsum.photos/400/400?5">
        <img src="https://picsum.photos/400/400?6">
      </div>
    </div>
    </script>
    <script>
    // Portfolio edit√°vel
    let portfolioEditMode = false;
    const editBtn = document.getElementById('edit-portfolio-btn');
    const addBtn = document.getElementById('add-portfolio-item');
    const portfolioItems = document.getElementById('portfolio-items');

    // Dados iniciais (mock)
    let portfolioData = [
      {img:'https://picsum.photos/400/400?1', nome:'Projeto 1', desc:'Descri√ß√£o 1'},
      {img:'https://picsum.photos/400/400?2', nome:'Projeto 2', desc:'Descri√ß√£o 2'},
      {img:'https://picsum.photos/400/400?3', nome:'Projeto 3', desc:'Descri√ß√£o 3'},
      {img:'https://picsum.photos/400/400?4', nome:'Projeto 4', desc:'Descri√ß√£o 4'},
      {img:'https://picsum.photos/400/400?5', nome:'Projeto 5', desc:'Descri√ß√£o 5'},
      {img:'https://picsum.photos/400/400?6', nome:'Projeto 6', desc:'Descri√ß√£o 6'}
    ];

    function renderPortfolio() {
      portfolioItems.innerHTML = '';
      portfolioData.forEach((item, idx) => {
        const div = document.createElement('div');
        div.className = 'portfolio-item';
        div.style = 'position:relative; text-align:center;';
        if (portfolioEditMode) {
          div.innerHTML = `
            <div style='position:relative; display:inline-block; margin-bottom:16px;'>
              <label style='cursor:pointer;'>
                <input type='file' accept='image/*' style='display:none;' data-idx='${idx}' class='portfolio-img-input'>
                <img src='${item.img}' alt='Portfolio' style='width:220px; height:220px; object-fit:cover; border-radius:18px; background:#eee; display:block; margin:auto; cursor:pointer;'>
              <script>
                // Altern√¢ncia de abas do perfil
                document.addEventListener('DOMContentLoaded', function() {
                  const tabBtns = document.querySelectorAll('.tab-btn');
                  const tabPanels = document.querySelectorAll('.tab-panel');
                  tabBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                      // Remove ativo de todos os bot√µes e pain√©is
                      tabBtns.forEach(b => b.classList.remove('active'));
                      tabPanels.forEach(panel => panel.classList.remove('active'));
                      // Ativa o bot√£o e painel correspondente
                      btn.classList.add('active');
                      const tab = btn.getAttribute('data-tab');
                      document.getElementById(tab).classList.add('active');
                    });
                  });
                });
              </script>
              reader.onload = e => {
                div.querySelector('img').src = e.target.result;
                portfolioData[idx].img = e.target.result;
              };
              reader.readAsDataURL(this.files[0]);
            }
          });
          // Editar nome
          div.querySelector('.portfolio-name').addEventListener('input', function() {
            portfolioData[idx].nome = this.value;
          });
          // Editar descri√ß√£o
          div.querySelector('.portfolio-desc').addEventListener('input', function() {
            portfolioData[idx].desc = this.value;
          });
          // Remover
          div.querySelector('.remove-portfolio-item').addEventListener('click', function() {
            portfolioData.splice(idx,1);
            renderPortfolio();
          });
        } else {
          div.innerHTML = `<img src='${item.img}' alt='Portfolio' style='width:220px; height:220px; object-fit:cover; border-radius:18px; background:#eee; display:block; margin:auto;'>`;
        }
        portfolioItems.appendChild(div);

    editBtn.addEventListener('click', function() {
      portfolioEditMode = !portfolioEditMode;
      addBtn.style.display = portfolioEditMode ? 'inline-block' : 'none';
      editBtn.textContent = portfolioEditMode ? 'Concluir Edi√ß√£o' : 'Editar Portf√≥lio';
      renderPortfolio();
    });

    addBtn.addEventListener('click', function() {
      portfolioData.push({img:'https://picsum.photos/400/400?random='+Math.random(), nome:'', desc:''});
      renderPortfolio();
    });

    window.addEventListener('DOMContentLoaded', function() {
      addBtn.style.display = 'none';
      renderPortfolio();
    });
    </script>
    <style>
    .portfolio-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 40px;
      align-items: start;
      max-width: 900px;
      width: 100%;
      box-sizing: border-box;
    }
    .portfolio-item img {
      width: 220px;
      height: 220px;
      object-fit: cover;
      border-radius: 18px;
      background: #eee;
      box-shadow: none;
      display: block;
    }
    @media (max-width: 900px) {
      .portfolio-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 32px 32px;
      }
      .portfolio-item img {
        width: 160px;
        height: 160px;
      }
    }
    @media (max-width: 600px) {
      .portfolio-grid {
        grid-template-columns: 1fr;
        gap: 18px 0;
      }
      .portfolio-item img {
        width: 100%;
        height: auto;
        max-width: 320px;
      }
    }
    </style>
    </script>
    </script>
    </script>
    <style>
    .portfolio-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 32px 32px;
      justify-items: center;
      align-items: center;
      background: #fcfaf7;
      border-radius: 0 0 24px 24px;
    }
    .portfolio-item img {
      width: 220px;
      height: 220px;
      object-fit: cover;
      border-radius: 18px;
      background: #eee;
      box-shadow: none;
      display: block;
    }
    @media (max-width: 900px) {
      .portfolio-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      .portfolio-item img {
        width: 160px;
        height: 160px;
      }
    }
    @media (max-width: 600px) {
      .portfolio-grid {
        grid-template-columns: 1fr;
        gap: 18px 0;
      }
      .portfolio-item img {
        width: 100%;
        height: auto;
        max-width: 320px;
      }
    }
    </style>
    <!-- SERVI√áOS -->
    <div id="servicos" class="tab-panel">
      <button class="edit-btn" data-edit="servicos">Editar Servi√ßos</button>
      <ul class="services">
        <li>üì∏ Casamentos</li>
        <li>üéâ Eventos</li>
        <li>üßë‚Äçüíº Retratos Profissionais</li>
        <li>üè¢ Fotografia Corporativa</li>
      </ul>
    </div>
    <!-- AVALIA√á√ïES -->
    <div id="avaliacoes" class="tab-panel">
      <div class="review">
        <p>Excelente profissional, super atento.</p>
        <span>‚Äî Ana Silva</span>
      </div>
      <div class="review">
        <p>Fotos incr√≠veis, recomendo.</p>
        <span>‚Äî Jo√£o Costa</span>
      </div>
    </div>
  </section>
</main>

<script>
  // Altern√¢ncia de abas do perfil
  document.addEventListener('DOMContentLoaded', function() {
    const tabBtns = document.querySelectorAll('.tab-btn');
    const tabPanels = document.querySelectorAll('.tab-panel');
    tabBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        // Remove ativo de todos os bot√µes e pain√©is
        tabBtns.forEach(b => b.classList.remove('active'));
        tabPanels.forEach(panel => panel.classList.remove('active'));
        // Ativa o bot√£o e painel correspondente
        btn.classList.add('active');
        const tab = btn.getAttribute('data-tab');
        document.getElementById(tab).classList.add('active');
      });
    });
  });
</script>

{{/main}}
{{/layout}}