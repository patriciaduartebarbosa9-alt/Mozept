{{< minimal}}
{{$main}}
<main class="register-main">
  <div class="register-container">
    <div class="register-welcome">
      <h1>Bem Vindo<br>de Volta!</h1>
      <p>Entre para desfrutar melhor do nosso website.</p>
      <a href="login.html" class="register-btn-outline">Entrar</a>
    </div>
    <div class="register-form-side">
      <h2>Criar Conta</h2>
      <div class="register-socials">
        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
        <a href="#" aria-label="X"><i class="fab fa-x-twitter"></i></a>
        <a href="#" aria-label="Google"><i class="fab fa-google"></i></a>
      </div>
        <form class="register-form" id="register-form" action="insert_fotografo.php" method="POST" enctype="multipart/form-data">
        <label>Nome Completo*
          <input type="text" name="nome" placeholder="nome" required>
        </label>
        <label>Email*
          <input type="email" name="email" placeholder="email@mail.com" required>
        </label>
        <label>Password*
          <div class="password-field">
            <input type="password" name="password" placeholder="*****" id="reg-password" required>
            <span class="toggle-password" onclick="togglePassword()"><i class="fa fa-eye"></i></span>
          </div>
        </label>
        <label>Distrito*
  <select name="distrito" id="distrito" required>
    <option value="">Seleciona o distrito</option>
    <option value="Aveiro">Aveiro</option>
    <option value="Lisboa">Lisboa</option>
    <option value="Porto">Porto</option>
    <option value="Braga">Braga</option>
  </select>
</label>

<label>Concelho*
  <select name="concelho" id="concelho" disabled required>
  </select>
</label>

        <label>Certificado*
          <div class="file-upload-area" style="margin-top:8px;">
            <input type="file" name="certificado" id="certificado" required style="display:none;">
            <div id="certificado-drop" class="file-drop" style="border:2px dashed #bbb; border-radius:10px; padding:24px; text-align:center; background:#fafafa; cursor:pointer;">
              <i class="fa fa-cloud-upload-alt" style="font-size:2rem; color:#bbb;"></i><br>
              <span>Faz upload do seu ficheiro ou arrasta para aqui,<br> .pdf, .jpg, .png (máx. 5MB)</span><br>
              <button type="button" onclick="document.getElementById('certificado').click();" style="margin-top:10px; background:#eee; border:none; border-radius:6px; padding:6px 18px; cursor:pointer;">Escolher ficheiro</button>
            </div>
            <span id="certificado-filename" style="display:block; margin-top:8px; color:#870000;"></span>
          </div>
        </label>
        <button type="submit" class="register-btn">Registar</button>
      </form>
    </div>
  </div>
</main>
<script>
function togglePassword() {
  const pwd = document.getElementById('reg-password');
  const icon = document.querySelector('.toggle-password i');
  if (pwd.type === 'password') {
    pwd.type = 'text';
    icon.classList.remove('fa-eye');
    icon.classList.add('fa-eye-slash');
  } else {
    pwd.type = 'password';
    icon.classList.remove('fa-eye-slash');
    icon.classList.add('fa-eye');
  }
}
// Drag and drop para certificado
const dropArea = document.getElementById('certificado-drop');
const fileInput = document.getElementById('certificado');
const fileName = document.getElementById('certificado-filename');
dropArea.addEventListener('click', () => fileInput.click());
dropArea.addEventListener('dragover', e => { e.preventDefault(); dropArea.style.background = '#f0eaea'; });
dropArea.addEventListener('dragleave', e => { e.preventDefault(); dropArea.style.background = '#fafafa'; });
dropArea.addEventListener('drop', e => {
  e.preventDefault();
  fileInput.files = e.dataTransfer.files;
  showFileName();
  dropArea.style.background = '#fafafa';
});
fileInput.addEventListener('change', showFileName);
function showFileName() {
  if (fileInput.files.length > 0) {
    fileName.textContent = fileInput.files[0].name;
  } else {
    fileName.textContent = '';
  }
}
// Nenhum JS impede o envio do formulário. O envio é feito diretamente para insert_fotografo.php via POST.
/* DISTRITOS → CONCELHOS (exemplo base, podes expandir) */
const concelhosPorDistrito = {
  aveiro: ["Aveiro", "Águeda", "Anadia", "Arouca", "Castelo de Paiva", "Espinho", "Estarreja", "Ílhavo", "Mealhada", "Murtosa", "Oliveira de Azeméis", "Oliveira do Bairro", "Ovar", "Santa Maria da Feira", "São João da Madeira", "Sever do Vouga", "Vagos", "Vale de Cambra"],
    lisboa: ["Lisboa", "Amadora", "Cascais", "Loures", "Mafra", "Odivelas", "Sintra", "Vila Franca de Xira", "Oeiras", "Alenquer", "Arruda dos Vinhos", "Azambuja", "Cadaval", "Lourinhã", "Sobral de Monte Agraço", "Torres Vedras"],
    porto: ["Porto", "Gondomar", "Maia", "Matosinhos", "Paredes", "Valongo", "Vila do Conde", "Vila Nova de Gaia", "Santo Tirso", "Trofa", "Felgueiras", "Lousada", "Paços de Ferreira", "Penafiel"],
};

const distritoSelect = document.getElementById("distrito");
const concelhoSelect = document.getElementById("concelho");

distritoSelect.addEventListener("change", () => {
  const distrito = distritoSelect.value.toLowerCase();

  concelhoSelect.innerHTML = "";

  if (!distrito) {
    concelhoSelect.disabled = true;
    concelhoSelect.innerHTML = `<option value="">Seleciona primeiro o distrito</option>`;
    return;
  }

  concelhoSelect.disabled = false;
  concelhoSelect.innerHTML = `<option value="">Seleciona o concelho</option>`;

  concelhosPorDistrito[distrito].forEach(concelho => {
    const option = document.createElement("option");
    option.value = concelho;
    option.textContent = concelho;
    concelhoSelect.appendChild(option);
  });
});
</script>

{{/main}}
{{/minimal}}
