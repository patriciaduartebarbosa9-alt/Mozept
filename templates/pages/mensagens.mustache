{{< layout}}
{{$main}}
        <style>
        </style>
        <div class="messaging-container">
            <div class="sidebar">
                <div class="search-box">
                    <input type="text" placeholder="Pesquisar" class="search-input" id="search-input">
                </div>
                <div class="conversations-list" id="conversations-list">
                    <!-- Conversas aparecem aqui -->
                </div>
            </div>
            <div class="chat-area">
                <div class="chat-header" id="chat-header" style="display:none;">
                    <div class="chat-header-info">
                        <img src="" alt="" class="chat-avatar" id="chat-avatar">
                        <div>
                            <h3 class="chat-user-name" id="chat-user-name"></h3>
                            <p class="chat-status">Online</p>
                        </div>
                    </div>
                </div>
                <div class="messages-container" id="messages-container" style="display:none;">
                    <div class="messages-list" id="messages-list"></div>
                </div>
                <div class="message-input-area" id="message-input-area" style="display:none;">
                    <div class="input-wrapper">
                        <button class="input-btn" id="upload-btn">
                            <span>游늹</span>
                        </button>
                        <input type="file" id="file-input" style="display: none;">
                        <input type="text" placeholder="Escreva a sua mensagem..." class="message-input" id="message-input">
                        <button class="input-btn send-btn" id="send-btn">
                            <span>游닋</span>
                        </button>
                    </div>
                </div>
                <div class="empty-state" id="empty-state">
                    <h2>As tuas mensagens</h2>
                    <p>Recebe e envia mensagens sobre os teus servi칞os.</p>
                </div>
            </div>
        </div>
        <script>
        // Dados de exemplo
        const conversations = [
            {
                id: 1,
                name: "Rodrigo Silva",
                avatar: "https://i.pravatar.cc/48?img=1",
                last: "Combinado! Qualquer d칰vida, 칠 s칩 dizer.",
                messages: [
                    { from: "other", text: "Ol치! Est치 tudo certo, sim 游녨" },
                    { from: "user", text: "Ol치!  Queria s칩 confirmar se est치 tudo certo para o dia 18." },
                    { from: "user", text: "Perfeito! Depois envio-lhe o local mais especificamente." },
                    { from: "other", text: "Combinado! Qualquer d칰vida, 칠 s칩 dizer." }
                ]
            },
            {
                id: 2,
                name: "Ana Ribeiro",
                avatar: "https://i.pravatar.cc/48?img=2",
                last: "J치 recebi os retratos.",
                messages: [
                    { from: "other", text: "J치 recebi os retratos." }
                ]
            },
            {
                id: 3,
                name: "Rafael Tavares",
                avatar: "https://i.pravatar.cc/48?img=3",
                last: "Obrigado pela confian칞a!",
                messages: [
                    { from: "other", text: "Obrigado pela confian칞a!" }
                ]
            }
        ];

        function renderConversations(list) {
            const el = document.getElementById('conversations-list');
            el.innerHTML = list.map(conv => `
                <div class="conversation-item" data-id="${conv.id}">
                    <img src="${conv.avatar}" alt="${conv.name}" class="avatar">
                    <div class="conversation-info">
                        <h3>${conv.name}</h3>
                        <p>${conv.last}</p>
                    </div>
                </div>
            `).join('');
        }

        function renderMessages(conv) {
            const el = document.getElementById('messages-list');
            el.innerHTML = conv.messages.map(msg => `
                <div class="message-bubble ${msg.from}">${msg.text}</div>
            `).join('');
        }

        function showChat(conv) {
            document.getElementById('chat-header').style.display = '';
            document.getElementById('messages-container').style.display = '';
            document.getElementById('message-input-area').style.display = '';
            document.getElementById('empty-state').style.display = 'none';
            document.getElementById('chat-avatar').src = conv.avatar;
            document.getElementById('chat-user-name').textContent = conv.name;
            renderMessages(conv);
        }

        function showEmpty() {
            document.getElementById('chat-header').style.display = 'none';
            document.getElementById('messages-container').style.display = 'none';
            document.getElementById('message-input-area').style.display = 'none';
            document.getElementById('empty-state').style.display = '';
        }

        // Inicializa칞칚o
        renderConversations(conversations);
        showEmpty();

        // Sele칞칚o de conversa
        document.getElementById('conversations-list').addEventListener('click', function(e) {
            const item = e.target.closest('.conversation-item');
            if (!item) return;
            const id = parseInt(item.dataset.id);
            document.querySelectorAll('.conversation-item').forEach(el => el.classList.remove('active'));
            item.classList.add('active');
            const conv = conversations.find(c => c.id === id);
            if (conv) showChat(conv);
        });

        // Pesquisa
        document.getElementById('search-input').addEventListener('input', function(e) {
            const val = e.target.value.toLowerCase();
            renderConversations(conversations.filter(c => c.name.toLowerCase().includes(val)));
        });

        // Envio de mensagem (apenas visual)
        document.getElementById('send-btn').addEventListener('click', function() {
            const input = document.getElementById('message-input');
            const txt = input.value.trim();
            if (!txt) return;
            const active = document.querySelector('.conversation-item.active');
            if (!active) return;
            const id = parseInt(active.dataset.id);
            const conv = conversations.find(c => c.id === id);
            conv.messages.push({ from: 'user', text: txt });
            renderMessages(conv);
            input.value = '';
        });
        </script>
{{/main}}
{{/ layout}}