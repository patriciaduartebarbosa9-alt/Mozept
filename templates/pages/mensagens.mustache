{{< layout}}
{{$main}}
        <style>
        .messaging-container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 32px;
            padding: 32px 0 32px 0;
            background: #fdfcf9;
            min-height: 70vh;
        }
        .sidebar {
            min-width: 260px;
            max-width: 320px;
            background: #FCFBF8;
            border: 2px solid #7b0000;
            border-radius: 18px;
            padding: 18px 16px;
            display: flex;
            flex-direction: column;
            gap: 16px;
            height: 520px;
        }
        
        .search-input {
            border: none;
            background: transparent;
            font-size: 1rem;
            width: 100%;
            outline: none;
        }
        .conversations-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .conversation-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 6px;
            border-radius: 10px;
            cursor: pointer;
            border: 1.5px solid #7b0000;
            background: #FCFBF8;
            transition: background 0.2s;
        }
        .conversation-item.active {
            background: #f8eaea;
            border-color: #7b0000;
        }
        .avatar {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            object-fit: cover;
        }
        .conversation-info h3 {
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
        }
        .conversation-info p {
            margin: 0;
            font-size: 0.92rem;
            color: #555;
        }
        .chat-area {
            flex: 1;
            background: #FCFBF8;
            border: 2px solid #7b0000;
            border-radius: 18px;
            min-width: 340px;
            max-width: 700px;
            padding: 18px 24px 0 24px;
            display: flex;
            flex-direction: column;
            min-height: 480px;
            position: relative;
        }
        .chat-header {
            display: flex;
            align-items: center;
            gap: 14px;
            margin-bottom: 10px;
        }
        .chat-header-info {
            display: flex;
            align-items: center;
            gap: 14px;
        }
        .chat-avatar {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            object-fit: cover;
        }
        .chat-user-name {
            margin: 0;
            font-size: 1.08rem;
            font-weight: 600;
        }
        .chat-status {
            margin: 0;
            font-size: 0.92rem;
            color: #7b0000;
        }
        .messages-container {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 12px;
            padding-right: 8px;
        }
        .messages-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .message-bubble {
            max-width: 70%;
            padding: 10px 16px;
            border-radius: 14px;
            font-size: 1rem;
            word-break: break-word;
            margin-bottom: 2px;
            display: inline-block;
        }
        .message-bubble.user {
            background: #7b0000;
            color: #FCFBF8;
            align-self: flex-end;
        }
        .message-bubble.other {
            background: #FCFBF8;
            color: #222;
            align-self: flex-start;
        }
        .message-input-area {
            display: flex;
            align-items: center;
            padding: 0 0 18px 0;
            border-top: 1.5px solid #eee;
            margin-top: auto;
        }
        .input-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%;
        }
        .message-input {
            flex: 1;
            border: none;
            background: #f2f2f2;
            border-radius: 8px;
            padding: 10px 14px;
            font-size: 1rem;
            outline: none;
        }
        .input-btn {
            background: #7b0000;
            color: #FCFBF8;
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .send-btn {
            background: #7b0000;
            color: ;
        }
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            color: #7b0000;
            margin-top: 80px;
        }
        .empty-state h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        .empty-state p {
            font-size: 1.1rem;
            color: #7b0000;
        }
        </style>
        <div class="messaging-container">
            <div class="sidebar">
                <div class="search-box">
                    <input type="text" placeholder="Pesquisar" class="search-input" id="search-input">
                </div>
                <div class="conversations-list" id="conversations-list">
                    <!-- Conversas aparecem aqui -->
                </div>
            </div>
            <div class="chat-area">
                <div class="chat-header" id="chat-header" style="display:none;">
                    <div class="chat-header-info">
                        <img src="" alt="" class="chat-avatar" id="chat-avatar">
                        <div>
                            <h3 class="chat-user-name" id="chat-user-name"></h3>
                            <p class="chat-status">Online</p>
                        </div>
                    </div>
                </div>
                <div class="messages-container" id="messages-container" style="display:none;">
                    <div class="messages-list" id="messages-list"></div>
                </div>
                <div class="message-input-area" id="message-input-area" style="display:none;">
                    <div class="input-wrapper">
                        <button class="input-btn" id="upload-btn">
                            <span>游늹</span>
                        </button>
                        <input type="file" id="file-input" style="display: none;">
                        <input type="text" placeholder="Escreva a sua mensagem..." class="message-input" id="message-input">
                        <button class="input-btn send-btn" id="send-btn">
                            <span>游닋</span>
                        </button>
                    </div>
                </div>
                <div class="empty-state" id="empty-state">
                    <h2>As tuas mensagens</h2>
                    <p>Recebe e envia mensagens sobre os teus servi칞os.</p>
                </div>
            </div>
        </div>
        <script>
        // Dados de exemplo
        const conversations = [
            {
                id: 1,
                name: "Rodrigo Silva",
                avatar: "https://i.pravatar.cc/48?img=1",
                last: "Combinado! Qualquer d칰vida, 칠 s칩 dizer.",
                messages: [
                    { from: "other", text: "Ol치! Est치 tudo certo, sim 游녨" },
                    { from: "user", text: "Ol치!  Queria s칩 confirmar se est치 tudo certo para o dia 18." },
                    { from: "user", text: "Perfeito! Depois envio-lhe o local mais especificamente." },
                    { from: "other", text: "Combinado! Qualquer d칰vida, 칠 s칩 dizer." }
                ]
            },
            {
                id: 2,
                name: "Ana Ribeiro",
                avatar: "https://i.pravatar.cc/48?img=2",
                last: "J치 recebi os retratos.",
                messages: [
                    { from: "other", text: "J치 recebi os retratos." }
                ]
            },
            {
                id: 3,
                name: "Rafael Tavares",
                avatar: "https://i.pravatar.cc/48?img=3",
                last: "Obrigado pela confian칞a!",
                messages: [
                    { from: "other", text: "Obrigado pela confian칞a!" }
                ]
            }
        ];

        function renderConversations(list) {
            const el = document.getElementById('conversations-list');
            el.innerHTML = list.map(conv => `
                <div class="conversation-item" data-id="${conv.id}">
                    <img src="${conv.avatar}" alt="${conv.name}" class="avatar">
                    <div class="conversation-info">
                        <h3>${conv.name}</h3>
                        <p>${conv.last}</p>
                    </div>
                </div>
            `).join('');
        }

        function renderMessages(conv) {
            const el = document.getElementById('messages-list');
            el.innerHTML = conv.messages.map(msg => `
                <div class="message-bubble ${msg.from}">${msg.text}</div>
            `).join('');
        }

        function showChat(conv) {
            document.getElementById('chat-header').style.display = '';
            document.getElementById('messages-container').style.display = '';
            document.getElementById('message-input-area').style.display = '';
            document.getElementById('empty-state').style.display = 'none';
            document.getElementById('chat-avatar').src = conv.avatar;
            document.getElementById('chat-user-name').textContent = conv.name;
            renderMessages(conv);
        }

        function showEmpty() {
            document.getElementById('chat-header').style.display = 'none';
            document.getElementById('messages-container').style.display = 'none';
            document.getElementById('message-input-area').style.display = 'none';
            document.getElementById('empty-state').style.display = '';
        }

        // Inicializa칞칚o
        renderConversations(conversations);
        showEmpty();

        // Sele칞칚o de conversa
        document.getElementById('conversations-list').addEventListener('click', function(e) {
            const item = e.target.closest('.conversation-item');
            if (!item) return;
            const id = parseInt(item.dataset.id);
            document.querySelectorAll('.conversation-item').forEach(el => el.classList.remove('active'));
            item.classList.add('active');
            const conv = conversations.find(c => c.id === id);
            if (conv) showChat(conv);
        });

        // Pesquisa
        document.getElementById('search-input').addEventListener('input', function(e) {
            const val = e.target.value.toLowerCase();
            renderConversations(conversations.filter(c => c.name.toLowerCase().includes(val)));
        });

        // Envio de mensagem (apenas visual)
        document.getElementById('send-btn').addEventListener('click', function() {
            const input = document.getElementById('message-input');
            const txt = input.value.trim();
            if (!txt) return;
            const active = document.querySelector('.conversation-item.active');
            if (!active) return;
            const id = parseInt(active.dataset.id);
            const conv = conversations.find(c => c.id === id);
            conv.messages.push({ from: 'user', text: txt });
            renderMessages(conv);
            input.value = '';
        });
        </script>
{{/main}}
{{/ layout}}